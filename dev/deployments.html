<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link rel="preload" href="/nimbus-shared/_next/static/css/f4a59790916c87b348ca.css" as="style"/><link rel="stylesheet" href="/nimbus-shared/_next/static/css/f4a59790916c87b348ca.css"/><link rel="preload" href="/nimbus-shared/_next/static/zJfCvJS3M5xflclqF_3zk/pages/_app.js" as="script"/><link rel="preload" href="/nimbus-shared/_next/static/zJfCvJS3M5xflclqF_3zk/pages/dev/deployments.js" as="script"/><link rel="preload" href="/nimbus-shared/_next/static/runtime/webpack-c212667a5f965e81e004.js" as="script"/><link rel="preload" href="/nimbus-shared/_next/static/chunks/framework.c6faae2799416a6da8e8.js" as="script"/><link rel="preload" href="/nimbus-shared/_next/static/chunks/f30e021cd0ee5a41ce896196d2c8a73eb5284c6b.fcc1b682b2b2aa4804cb.js" as="script"/><link rel="preload" href="/nimbus-shared/_next/static/runtime/main-bb92a649812ad198bac3.js" as="script"/></head><body><div id="__next"><div class="wrapper"><div class="header-wrapper"><a class="header" href="/nimbus-shared/"><img src="/nimbus-shared/logo.svg" class="logo" width="40" height="40"/><h1>Project Nimbus Documentation</h1></a></div><nav class="site-nav"><ul><li><a class="">Home</a></li><h2>Using this library</h2><li><a class="">JavaScript and TypeScript</a></li><li><a class="">Python</a></li><li><a class="">Other environments</a></li><h2>Contents</h2><li><a class="">Schemas</a></li><li><a class="">Data</a></li><h2>Working on this library</h2><li><a class="">Setup</a></li><li><a class="">Schemas</a></li><li><a class="">Data</a></li><li><a class="">Writing Docs</a></li></ul></nav><main><h1>Deployment</h1><p>Deploys of the NPM and PyPI packages are handled automatically. CircleCI is configured to
automatically deploy packages from tagged commits that start with <code>v</code>. The packages will be built
automatically and pushed to the relevant package indexes.</p><h2 class="anchoredHeadings_anchoredHeading__ojblp"><a class="anchoredHeadings_anchor__1xk1u anchoredHeadings_pullLeft__2NurG" href="#release-issues" id="release-issues" title="Permalink to this heading">#</a>Release Issues</h2><p>That&#x27;s not all that there is to making a release though. The tag needs made, the changelog updated,
and other manual tasks need done. To ensure consistency we use release issues on GitHub to plan,
assign, and execute on new releases. You can see examples of existing release issues
<a href="https://github.com/mozilla/nimbus-shared/issues?q=is%3Aissue+label%3Areleases+sort%3Acreated-desc">here</a>.</p><p>The last step in each release bug is to create a new issue based on the current <a href="https://github.com/mozilla/nimbus-shared/issues/new?assignees=&amp;labels=&amp;template=release-checklist.md&amp;title=Release+VERSION">release
template</a>. Any changes that need to be made to the deploy process should happen as pull requests
that update that template.</p><h2 class="anchoredHeadings_anchoredHeading__ojblp"><a class="anchoredHeadings_anchor__1xk1u anchoredHeadings_pullLeft__2NurG" href="#credentials" id="credentials" title="Permalink to this heading">#</a>Credentials</h2><p>The credentials that are used for deployments are linked to an account named
<code>project-nimbus-publishing</code> on both NPM and PyPI, and those accounts are tied to the email address
<a href="mailto:project-nimbus-publishing@mozilla.com.">project-nimbus-publishing@mozilla.com.</a> Each of the PyPI and NPM accounts have an API key that is
given to CircleCI for deployments.</p><p>This email address is a private Google Group that several engineers from the Nimbus have access to.
The password to these accounts is not shared, and if someone who does not have the current password
needs to work with the accounts, they can use a password reset to gain access.</p><h3 class="anchoredHeadings_anchoredHeading__ojblp"><a class="anchoredHeadings_anchor__1xk1u anchoredHeadings_pullLeft__2NurG" href="#how-to-reset-account-passwords" id="how-to-reset-account-passwords" title="Permalink to this heading">#</a>How to reset account passwords</h3><p>In case you need to get or reset the password for one of the accounts, use these steps:</p><ol><li>Use the &quot;reset password&quot; option of the relevant site.</li><li>Reply to the mailing list thread to confirm that the password reset was legitimate, and to
identify who did it to the rest of the team.</li><li>Change the password on the account. Do not share the new password with anyone.</li><li>Optionally, store the new password as you would any other private password.</li></ol><h3 class="anchoredHeadings_anchoredHeading__ojblp"><a class="anchoredHeadings_anchor__1xk1u anchoredHeadings_pullLeft__2NurG" href="#how-to-reset-tokens" id="how-to-reset-tokens" title="Permalink to this heading">#</a>How to reset tokens</h3><p>In case the tokens used to authenticate to the account are lost or leaked, reset them using these
steps. Consider using Firefox Containers to seperate your normal login from the shared one (for
convenience).</p><ul><li><p>NPM</p><ol><li>Log in to NPM as project-nimbus-publishing.</li><li>Click on the avatar in the top right, and choose &quot;Auth Tokens&quot;.</li><li>Delete the old token with the X on the right side.</li><li>Create new token with rights to both read and publish.</li><li>Immediately copy that token to CircleCI as <code>NPM_TOKEN</code> (see below).</li><li>Do not store the token anywhere else.</li></ol></li><li><p>PyPI</p><ol><li>Log in to PyPI as project-nimbus-publishing.</li><li>Go to the account settings in the left-side menu.</li><li>In the section labeled &quot;API Tokens&quot;, remove the old token using the &quot;Options&quot; drop down.</li><li>Add a new API token that has access to only the specific nimbus-shared package.</li><li>Immediately copy that token to CircleCI as <code>PYPI_TOKEN</code> (see below).</li><li>Do not store the token anywhere else.</li></ol></li><li><p>Adding Tokens to CircleCI</p><ol><li>Open <a href="https://app.circleci.com/pipelines/github/mozilla/nimbus-shared">the CircleCI project</a>. You can log in as any account with write access to the project.</li><li>Open the project settings with the link in the top right.</li><li>Open the Environment Variables section of the settings.</li><li>Remove the variable old token.</li><li>Add a new variable with the new token. The name should be either <code>NPM_TOKEN</code> or <code>PYPI_TOKEN</code>,
depending on which service the token is for.</li></ol></li></ul></main></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{}},"page":"/dev/deployments","query":{},"buildId":"zJfCvJS3M5xflclqF_3zk","assetPrefix":"/nimbus-shared","nextExport":true,"autoExport":true,"isFallback":false}</script><script nomodule="" src="/nimbus-shared/_next/static/runtime/polyfills-2f74f7d9820760171318.js"></script><script async="" data-next-page="/_app" src="/nimbus-shared/_next/static/zJfCvJS3M5xflclqF_3zk/pages/_app.js"></script><script async="" data-next-page="/dev/deployments" src="/nimbus-shared/_next/static/zJfCvJS3M5xflclqF_3zk/pages/dev/deployments.js"></script><script src="/nimbus-shared/_next/static/runtime/webpack-c212667a5f965e81e004.js" async=""></script><script src="/nimbus-shared/_next/static/chunks/framework.c6faae2799416a6da8e8.js" async=""></script><script src="/nimbus-shared/_next/static/chunks/f30e021cd0ee5a41ce896196d2c8a73eb5284c6b.fcc1b682b2b2aa4804cb.js" async=""></script><script src="/nimbus-shared/_next/static/runtime/main-bb92a649812ad198bac3.js" async=""></script><script src="/nimbus-shared/_next/static/zJfCvJS3M5xflclqF_3zk/_buildManifest.js" async=""></script><script src="/nimbus-shared/_next/static/zJfCvJS3M5xflclqF_3zk/_ssgManifest.js" async=""></script></body></html>